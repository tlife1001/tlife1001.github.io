<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thanh Tân & Thanh Hậu</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="images/favicon.png">
    <link rel="icon" type="image/png" sizes="16x16" href="images/favicon.png">
    <link rel="apple-touch-icon" sizes="180x180" href="images/favicon.png">
    <link rel="shortcut icon" href="images/favicon.png">
    <meta name="msapplication-TileImage" content="images/favicon.png">
    <meta name="msapplication-TileColor" content="#e91e63">
    <meta name="theme-color" content="#e91e63">
    
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Montserrat:wght@400;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Music Control -->
    <div class="music-control">
        <span class="music-title">Beautiful In White</span>
        <button id="musicToggle" class="music-btn">
            <i class="fas fa-music"></i>
        </button>
        <audio id="bgMusic" loop>
            <source src="web_music.mp3" type="audio/mpeg">
        </audio>
    </div>

    <!-- Hero Section -->
    <section id="hero" class="hero">
        <div class="hero-bg-effect"></div>
        <div class="hero-content">
            <div class="hero-text">
                <div class="hero-date"><i class="fas fa-calendar-alt hero-date-icon"></i> 13.07.2025</div>
                <h1 class="hero-name">Thanh Tân <span class="hero-and">&</span> Thanh Hậu</h1>
                <p class="hero-subtitle">Trân trọng kính mời</p>
            </div>
            <div class="hero-photo">
                <img src="images/hero-bg.jpg" alt="Couple Photo">
            </div>
        </div>
    </section>
    
    <!-- Countdown Section -->
    <section class="countdown-section">
        <div class="container">
            <h2>Đếm ngược đến ngày trọng đại</h2>
            <div class="countdown-container">
                <div class="countdown-item">
                    <div class="countdown-value" id="countdown-days">00</div>
                    <div class="countdown-label">Ngày</div>
                </div>
                <div class="countdown-item">
                    <div class="countdown-value" id="countdown-hours">00</div>
                    <div class="countdown-label">Giờ</div>
                </div>
                <div class="countdown-item">
                    <div class="countdown-value" id="countdown-minutes">00</div>
                    <div class="countdown-label">Phút</div>
                </div>
                <div class="countdown-item">
                    <div class="countdown-value" id="countdown-seconds">00</div>
                    <div class="countdown-label">Giây</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Couple Section -->
    <section class="couple">
        <div class="container">
            <h2>Chúng tôi</h2>
            <div class="couple-info">
                <div class="person">
                    <h3>Trần Thanh Tân</h3>
                    <p>Con trai ông bà Trần Thanh Ngọc & Phạm Thị Thanh Bình</p>
                    <p>128 N2, Khuông Việt, Mega Village</p>
                    <p>P. Phú Hữu, TP. Thủ Đức, TP. HCM</p>
                </div>
                <div class="heart"><i class="fas fa-heart"></i></div>
                <div class="person">
                    <h3>Lê Thị Thanh Hậu</h3>
                    <p>Con gái ông bà Lê Công Thi & Võ Thị Ngọc Mẫn</p>
                    <p>49 Hoàng Văn Thụ, Tổ 4, P. Tây Sơn</p>
                    <p>Thị Xã An Khê, Tỉnh Gia Lai</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Event Details Section -->
    <section class="event-details">
        <div class="container">
            <h2>Thông Tin Lễ Cưới</h2>
            <div class="timeline">
                <div class="event single-event">
                    <h3>Tiệc Cưới</h3>
                    <p class="time">11:00 - 14:00</p>
                    <p class="location">Nhà Hàng Maxim's - Sảnh Louis II</p>
                    <p class="address">Số 36 Nguyễn Thái Học, Phường 7, Thành Phố Vũng Tàu, Tỉnh Bà Rịa - Vũng Tàu, Việt Nam</p>
                    <p class="note">Đón Khách: 11h00 - Khai Tiệc: 11h30</p>
                </div>
            </div>
        </div>
    </section>

    <!-- RSVP Section đã được di chuyển xuống trên section chỉ đường -->

    <!-- Gallery Section -->
    <section class="gallery">
        <div class="container">
            <h2>Khoảnh Khắc Đẹp</h2>
            <div class="carousel-container">
                <div class="carousel-gradient left"></div>
                <div class="carousel-gradient right"></div>
                <div class="carousel-list">
                    <div class="carousel-thumb" onclick="openImageModal('images/gallery-1.jpg', 0)">
                        <img src="images/gallery-1.jpg" alt="Khoảnh khắc đẹp 1">
                    </div>
                    <div class="carousel-thumb" onclick="openImageModal('images/gallery-2.jpg', 1)">
                        <img src="images/thumb_2.png" alt="Khoảnh khắc đẹp 2">
                    </div>
                    <div class="carousel-thumb" onclick="openImageModal('images/gallery-3.jpg', 2)">
                        <img src="images/thumb_3.png" alt="Khoảnh khắc đẹp 3">
                    </div>
                    <div class="carousel-thumb" onclick="openImageModal('images/gallery-4.jpg', 3)">
                        <img src="images/thumb_4.png" alt="Khoảnh khắc đẹp 4">
                    </div>
                    <div class="carousel-thumb" onclick="openImageModal('images/gallery-5.jpg', 4)">
                        <img src="images/gallery-5.jpg" alt="Khoảnh khắc đẹp 5">
                    </div>
                    <div class="carousel-thumb" onclick="openImageModal('images/gallery-6.jpg', 5)">
                        <img src="images/gallery-6.jpg" alt="Khoảnh khắc đẹp 6">
                    </div>
                    <div class="carousel-thumb" onclick="openImageModal('images/gallery-7.jpg', 6)">
                        <img src="images/gallery-7.jpg" alt="Khoảnh khắc đẹp 7">
                    </div>
                    <div class="carousel-thumb" onclick="openImageModal('images/gallery-8.jpg', 7)">
                        <img src="images/thumb_8.png" alt="Khoảnh khắc đẹp 8">
                    </div>
                    <div class="carousel-thumb" onclick="openImageModal('images/gallery-9.jpg', 8)">
                        <img src="images/gallery-9.jpg" alt="Khoảnh khắc đẹp 9">
                    </div>
                </div>
            </div>
        </div>
    </section>

   
    
    <!-- Map Section -->    
    <section id="map" class="section map-section">
        <div class="container">
            <h2 class="section-title">Bản Đồ & Chỉ Dẫn</h2>
            <div class="map-container">
                <!-- Cell 1: Bản đồ và nút bấm -->
                <div class="map-cell">
                    <div class="map-wrapper">
                        <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3919.4241674197956!2d107.07!3d10.35!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x31756fd4554f0cf5%3A0xb58badbe5fdb0b77!2sMaxim&#39;s%20Restaurant!5e0!3m2!1svi!2s!4v1623123456789!5m2!1svi!2s" width="100%" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
                    </div>
                    <div class="map-links">
                        <a href="https://www.google.com/maps/place/Nh%C3%A0+h%C3%A0ng+Maxim's/@10.3664358,107.0825101,17z/data=!3m1!4b1!4m6!3m5!1s0x31756fc5f349ac29:0x7463f56c1bca12cb!8m2!3d10.3664358!4d107.085085!16s%2Fg%2F1v75pd2z?entry=ttu&g_ep=EgoyMDI1MDUyOC4wIKXMDSoASAFQAw%3D%3D" target="_blank" class="map-link" title="Mở bản đồ Nhà Hàng Maxim's">
                            <i class="fas fa-map-marked-alt"></i> Mở Google Maps - Nhà Hàng Maxim's
                        </a>
                    </div>
                </div>
                
                <!-- Cell 2: Thông tin chỉ dẫn theo hàng ngang -->
                <div class="directions-cell">
                    <h3>Chỉ Dẫn Đường Đi</h3>
                    <div class="directions-row">
                        <!-- Cột 1: Lễ thành hôn -->
                        <!-- <div class="direction-location">
                            <h4 class="location-title">Lễ Thành Hôn tại Tư Gia (14/07/2025)</h4>
                            <p class="location-address">128 N2, Khuông Việt, Mega Village P. Phú Hữu, TP. Thủ Đức, TP. HCM</p>
                            
                            <div class="direction-item">
                                <i class="fas fa-car"></i>
                                <div class="direction-content">
                                    <h4>Bằng Ô Tô</h4>
                                    <p>Từ TP.HCM, đi theo hướng Cao tốc Long Thành - Dầu Giây, rẽ vào đường vào huyện Nhơn Trạch và tiếp tục đi theo chỉ dẫn đến Thôn Phú Hữu, Xã Phú Hữu.</p>
                                </div>
                            </div>
                            <div class="direction-item">
                                <i class="fas fa-bus"></i>
                                <div class="direction-content">
                                    <h4>Bằng Xe Buýt</h4>
                                    <p>Các tuyến xe buýt đi Nhơn Trạch từ Bến xe Miền Đông, sau đó đi xe ôm hoặc taxi đến địa điểm.</p>
                                </div>
                            </div>
                            <div class="direction-item">
                                <i class="fas fa-taxi"></i>
                                <div class="direction-content">
                                    <h4>Bằng Taxi</h4>
                                    <p>Có thể đặt Grab, Be hoặc taxi đến địa chỉ: Giấy CN-487, Thôn Phú Hữu, Xã Phú Hữu, Huyện Nhơn Trạch, Đồng Nai.</p>
                                </div>
                            </div>
                        </div> -->
                        
                        <!-- Cột 2: Tiệc cưới -->
                        <div class="direction-location">
                            <h4 class="location-title">Tiệc Cưới tại Nhà Hàng Maxim's (13/07/2025)</h4>
                            <p class="location-address">Số 36 Nguyễn Thái Học, Phường 7, Thành Phố Vũng Tàu, Tỉnh Bà Rịa - Vũng Tàu</p>
                            
                            <div class="direction-item">
                                <i class="fas fa-car"></i>
                                <div class="direction-content">
                                    <h4>Bằng Ô Tô</h4>
                                    <p>Từ TP.HCM, đi theo cao tốc TP.HCM - Long Thành - Dầu Giây, sau đó rẽ vào đường QL51 đi Vũng Tàu. Khi đến Vũng Tàu, đi theo đường Nguyễn Thái Học đến số 36.</p>
                                </div>
                            </div>
                            <div class="direction-item">
                                <i class="fas fa-bus"></i>
                                <div class="direction-content">
                                    <h4>Bằng Xe Khách</h4>
                                    <p>Từ Bến xe Miền Đông, bắt xe khách đi Vũng Tàu. Khi đến Vũng Tàu, bạn có thể đi taxi hoặc xe ôm đến Nhà Hàng Maxim's, số 36 Nguyễn Thái Học.</p>
                                </div>
                            </div>
                            <div class="direction-item">
                                <i class="fas fa-taxi"></i>
                                <div class="direction-content">
                                    <h4>Bằng Taxi</h4>
                                    <p>Đặt taxi hoặc Grab đến trực tiếp địa chỉ: Nhà Hàng Maxim's, Số 36 Nguyễn Thái Học, Phường 7, Thành Phố Vũng Tàu.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Congratulations Section -->
    <section class="congratulations-section">
        <div class="container">
            <h2>Gửi Lời Chúc Mừng</h2>
            <div class="congratulations-content">
                <div class="congratulations-text">
                    <p class="elegant-text">Sự hiện diện của quý khách trong ngày trọng đại này chính là niềm hạnh phúc lớn nhất của chúng tôi.</p>
                    <p class="elegant-text">Nếu không thể đến dự được, lời chúc phúc chân thành từ quý khách đã là món quà vô giá mà chúng tôi trân trọng.</p>
                    <p class="elegant-text">Chúng tôi xin gửi lời cảm ơn sâu sắc đến tình cảm và sự quan tâm của quý khách dành cho gia đình chúng tôi.</p>
                </div>
                <div class="qr-banking">
                    <div class="qr-container">
                        <div class="qr-header">
                            <i class="fas fa-heart qr-heart"></i>
                            <h4>Gửi Lời Chúc Phúc</h4>
                        </div>
                        <div class="qr-image-wrapper">
                            <img src="images/banking_qr.png" alt="QR Banking" class="qr-image">
                        </div>
                        <p class="qr-caption">Quét mã để gửi lời chúc mừng</p>
                        <p class="qr-note">Tấm lòng của quý khách là điều quý giá nhất</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- RSVP Section -->
    <section class="rsvp" id="rsvp">
        <div class="container">
            <h2>Xác Nhận Tham Dự</h2>
            <div class="rsvp-form-container">
                <form id="rsvpForm" class="rsvp-form">
                    <div class="rsvp-form-row">
                        <div class="form-group">
                            <label for="name">Họ và tên</label>
                            <input type="text" id="name" name="name" required>
                        </div>
                        <div class="form-group">
                            <label for="phone">Số điện thoại</label>
                            <input type="tel" id="phone" name="phone" required>
                        </div>
                        <div class="form-group">
                            <label for="guests">Số người tham dự</label>
                            <select id="guests" name="guests" required>
                                <option value="1">1 người</option>
                                <option value="2">2 người</option>
                                <option value="3">3 người</option>
                                <option value="4">4 người</option>
                                <option value="5">5 người</option>
                            </select>
                        </div>
                    </div>
                    <div class="rsvp-form-row">
                        <div class="form-group">
                            <label for="transportation">Phương tiện di chuyển</label>
                            <select id="transportation" name="transportation" required>
                                <option value="">Chọn phương tiện</option>
                                <option value="self">Tự túc phương tiện</option>
                                <option value="arranged">Xe sắp xếp</option>
                            </select>
                        </div>
                        <div class="form-group message-group">
                            <label for="message">Lời nhắn</label>
                            <textarea id="message" name="message" rows="4"></textarea>
                        </div>
                    </div>
                    <div class="rsvp-form-row submit-row">
                        <button type="submit" class="rsvp-submit">Gửi xác nhận</button>
                    </div>
                </form>
            </div>
        </div>
    </section>

    <!-- Countdown Section được di chuyển lên sau section hero -->

    <!-- Wedding Card Generator Section -->
    <section class="wedding-card-generator">
        <div class="container">
            <h2>Thiệp Mời Online</h2>
            <div class="invitation-intro">
                <p>Trân trọng kính mời bạn đến dự lễ thành hôn của chúng tôi</p>
            </div>
            <form id="cardForm" class="card-form">
                <input type="text" id="guestName" placeholder="Nhập tên người được mời" required>
                <button type="submit">Xem thiệp mời</button>
            </form>
            
            <div class="invitation-card-container">
                <div class="invitation-envelope" id="invitationEnvelope">
                    <div class="envelope-front">
                        <div class="envelope-flap"></div>
                        <div class="envelope-content">
                            <div class="save-the-date">
                                <div class="save-date-text">SAVE THE DATE</div>
                                <div class="couple-names">Thanh Tân & Thanh Hậu</div>
                                <div class="wedding-date">13.07.2025</div>
                            </div>
                        </div>
                    </div>
                    <div class="envelope-back"></div>
                </div>
                
                <div id="cardResult" class="card-result" style="display:none;">
                    <div id="weddingCard" class="wedding-card-preview">
                        <!-- Trang 1: Thông tin gia đình -->
                        <div class="card-page card-page-1 active">
                            <div class="card-header">
                                <div class="card-monogram">T<span class="card-monogram-and">&</span>H</div>
                            </div>
                            <div class="card-content">
                                <div class="card-couple">
                                    <div class="card-family card-groom">
                                        <h3>NHÀ TRAI</h3>
                                        <p>Ông: TRẦN THANH NGỌC</p>
                                        <p>Bà: PHẠM THỊ THANH BÌNH</p>
                                        <p class="card-announce">TRÂN TRỌNG BÁO TIN LỄ TÂN HÔN</p>
                                        <p>CỦA CON CHÚNG TÔI</p>
                                        <h4 class="card-person-name">Trần Thanh Tân</h4>
                                    </div>
                                    <div class="card-family card-bride">
                                        <h3>NHÀ GÁI</h3>
                                        <p>Ông: LÊ CÔNG THI</p>
                                        <p>Bà: VÕ THỊ NGỌC MẪN</p>
                                        <p class="card-announce">TRÂN TRỌNG BÁO TIN LỄ TÂN HÔN</p>
                                        <p>CỦA CON CHÚNG TÔI</p>
                                        <h4 class="card-person-name">Lê Thị Thanh Hậu</h4>
                                    </div>
                                </div>
                                <div class="card-signatures">
                                    <div class="groom-signature">Trần Thanh Tân</div>
                                    <span class="signature-and">&</span>
                                    <div class="bride-signature">Lê Thị Thanh Hậu</div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Trang 2: Thông tin sự kiện -->
                        <div class="card-page card-page-2">
                            <!-- <div class="card-calendar">
                                <div class="calendar-header">THÁNG 07</div>
                                <div class="calendar-weekdays">
                                    <div>CN</div><div>T2</div><div>T3</div><div>T4</div><div>T5</div><div>T6</div><div>T7</div>
                                </div>
                                <div class="calendar-days">
                                    <div>1</div><div>2</div><div>3</div><div>4</div><div>5</div><div>6</div>
                                    <div>7</div><div>8</div><div>9</div><div>10</div><div>11</div><div>12</div>
                                    <div class="calendar-day-highlight">13</div><div class="calendar-day-highlight">14</div><div>15</div><div>16</div>
                                    <div>17</div><div>18</div><div>19</div><div>20</div><div>21</div><div>22</div>
                                    <div>23</div><div>24</div><div>25</div><div>26</div><div>27</div><div>28</div>
                                    <div>29</div><div>30</div><div>31</div>
                                </div>
                            </div> -->
                            <div class="card-details">
                                <div class="card-guest-name">
                                    <div class="guest-label">Kính mời:</div>
                                    <div id="cardGuestName" class="guest-name"></div>
                                </div>
                                
                                <!-- Thông tin tiệc cưới -->
                                <div class="card-event-details" style="margin-top: 20px;">
                                    <div class="event-date">
                                        <div class="date-number">13</div>
                                        <div class="date-month">07</div>
                                        <div class="date-year">2025</div>
                                    </div>
                                    <div class="event-info">
                                        <div class="event-time">VÀO LÚC: 11:00</div>
                                        <div class="event-venue">TIỆC MỪNG TẠI NHÀ HÀNG MAXIM'S - SẢNH LOUIS II</div>
                                        <div class="event-address">Số 36 Nguyễn Thái Học, Phường 7, Thành Phố Vũng Tàu, Tỉnh Bà Rịa - Vũng Tàu</div>
                                        <div class="event-note">CHỦ NHẬT, NGÀY 13 THÁNG 07 NĂM 2025</div>
                                        <div class="event-note">NHẰM NGÀY 19 THÁNG 06 NĂM ẤT TỴ</div>
                                        <div class="event-note">Đón Khách: 11h00 - Khai Tiệc: 11h30</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Nút điều hướng thiệp -->
                        <div class="card-navigation">
                            <button class="card-nav-btn prev-btn" id="prevCardPage"><i class="fas fa-chevron-left"></i></button>
                            <button class="card-nav-btn next-btn" id="nextCardPage"><i class="fas fa-chevron-right"></i></button>
                        </div>
                    </div>
                    
                    <!-- Nút tải và chia sẻ thiệp -->
                    <div class="card-actions">
                        <button id="downloadCard" class="download-btn"><i class="fas fa-download"></i> Tải thiệp</button>
                        <button id="shareCard" class="share-btn"><i class="fas fa-share-alt"></i> Chia sẻ</button>
                    </div>
                </div>
            </div>
        </div>
    </section>
 <!-- Contact Section -->
    <!-- <section id="contact" class="section contact-section">
        <div class="container">
            <h2 class="section-title">Liên Hệ</h2>
            <div class="contact-container">
                <div class="contact-item">
                    <i class="fas fa-phone"></i>
                    <h3>Điện Thoại</h3>
                    <p>Chú Rể (Tân): 0123-456-789</p>
                    <p>Cô Dâu (Hậu): 0987-654-321</p>
                </div>
                <div class="contact-item">
                    <i class="fas fa-envelope"></i>
                    <h3>Email</h3>
                    <p>tanthanh@example.com</p>
                    <p>haule@example.com</p>
                </div>
                <div class="contact-item">
                    <i class="fas fa-map-marker-alt"></i>
                    <h3>Địa Điểm</h3>
                    <p>Nhà Trai - 350</p>
                    <p>Giấy CN-487, Thôn Phú Hữu, Xã Phú Hữu, Huyện Nhơn Trạch, Đồng Nai</p>
                </div>
            </div>
        </div>
    </section> -->
    <!-- Modal for full image -->
    <div id="imageModal" class="image-modal">
        <span class="close-modal">&times;</span>
        <button class="modal-nav prev">&#10094;</button>
        <img class="modal-content" id="modalImg">
        <button class="modal-nav next">&#10095;</button>
        <div class="modal-indicator"><span id="modalCurrent">1</span> / <span id="modalTotal">4</span></div>
    </div>

    <!-- Footer Section đã được loại bỏ -->

    <!-- Scroll to Top Button -->
    <button id="scrollTopBtn" class="scroll-top-btn">
        <i class="fas fa-chevron-up"></i>
    </button>

    <script src="https://unpkg.com/scrollreveal"></script>
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script>
        // Scroll Reveal
        ScrollReveal().reveal('.hero-content', { delay: 200 });
        ScrollReveal().reveal('.couple-info', { delay: 300 });
        ScrollReveal().reveal('.event', { delay: 200 });
        ScrollReveal().reveal('.rsvp-form', { delay: 300 });
        ScrollReveal().reveal('.gallery-item', { delay: 200 });
        ScrollReveal().reveal('.contact-item', { delay: 200 });
        ScrollReveal().reveal('.countdown-container', { delay: 200 });
        ScrollReveal().reveal('.invitation-envelope', { delay: 300 });

        // Music Control
        const musicBtn = document.getElementById('musicToggle');
        const bgMusic = document.getElementById('bgMusic');
        let isPlaying = false;

        // Function to toggle music
        function toggleMusic() {
            if (isPlaying) {
                bgMusic.pause();
                musicBtn.classList.remove('playing');
            } else {
                bgMusic.play();
                musicBtn.classList.add('playing');
            }
            isPlaying = !isPlaying;
        }

        // Add click event to music button
        musicBtn.addEventListener('click', toggleMusic);

        // Auto play music when user interacts with the page
        document.addEventListener('click', function initAudio() {
            if (!isPlaying) {
                toggleMusic();
            }
            document.removeEventListener('click', initAudio);
        }, { once: true });
        
        // Countdown Timer
        function updateCountdown() {
            const weddingDate = new Date('July 13, 2025 09:00:00').getTime();
            const now = new Date().getTime();
            const timeLeft = weddingDate - now;
            
            const days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
            const hours = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);
            
            document.getElementById('countdown-days').textContent = days.toString().padStart(2, '0');
            document.getElementById('countdown-hours').textContent = hours.toString().padStart(2, '0');
            document.getElementById('countdown-minutes').textContent = minutes.toString().padStart(2, '0');
            document.getElementById('countdown-seconds').textContent = seconds.toString().padStart(2, '0');
            
            // Add animation effect when seconds change
            const secondsEl = document.getElementById('countdown-seconds');
            secondsEl.classList.add('pulse');
            setTimeout(() => {
                secondsEl.classList.remove('pulse');
            }, 500);
        }
        
        // Update countdown every second
        setInterval(updateCountdown, 1000);
        updateCountdown(); // Initial call
        
        // Wedding Invitation Card
        const invitationEnvelope = document.getElementById('invitationEnvelope');
        const cardResult = document.getElementById('cardResult');
        const cardForm = document.getElementById('cardForm');
        const cardGuestName = document.getElementById('cardGuestName');
        const prevCardPageBtn = document.getElementById('prevCardPage');
        const nextCardPageBtn = document.getElementById('nextCardPage');
        const downloadCardBtn = document.getElementById('downloadCard');
        const shareCardBtn = document.getElementById('shareCard');
        
        // Card page navigation
        let currentCardPage = 1;
        const totalCardPages = 2;
        
        function showCardPage(pageNum) {
            document.querySelectorAll('.card-page').forEach(page => {
                page.classList.remove('active');
            });
            document.querySelector(`.card-page-${pageNum}`).classList.add('active');
            currentCardPage = pageNum;
            
            // Update navigation buttons
            prevCardPageBtn.style.visibility = pageNum === 1 ? 'hidden' : 'visible';
            nextCardPageBtn.style.visibility = pageNum === totalCardPages ? 'hidden' : 'visible';
        }
        
        if (prevCardPageBtn && nextCardPageBtn) {
            prevCardPageBtn.addEventListener('click', () => {
                if (currentCardPage > 1) {
                    showCardPage(currentCardPage - 1);
                }
            });
            
            nextCardPageBtn.addEventListener('click', () => {
                if (currentCardPage < totalCardPages) {
                    showCardPage(currentCardPage + 1);
                }
            });
        }
        
        // Hiển thị form nhập tên ngay từ đầu thay vì phải click vào phong bì
        if (invitationEnvelope && cardForm) {
            // Hiển thị form nhập tên ngay từ đầu
            invitationEnvelope.style.display = 'none';
            cardForm.style.display = 'flex';
            
            // Hàm mở phong bì khi nhập tên
            function openEnvelope() {
                invitationEnvelope.style.display = 'block';
                cardForm.style.display = 'none';
                
                // Mở phong bì animation
                gsap.to(invitationEnvelope, {
                    rotationX: 180,
                    duration: 1,
                    ease: "power2.inOut",
                    onComplete: () => {
                        // Hiển thị thiệp sau khi phong bì mở
                        setTimeout(() => {
                            invitationEnvelope.style.display = 'none';
                            cardResult.style.display = 'block';
                            gsap.from(cardResult, {
                                y: 50,
                                opacity: 0,
                                duration: 0.5,
                                ease: "power2.out"
                            });
                        }, 500);
                    }
                });
                
                // Hiệu ứng confetti
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
            }
        }
        
        // Card form submission
        if (cardForm) {
            cardForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const guestNameInput = document.getElementById('guestName');
                const name = guestNameInput.value.trim();
                
                if (name) {
                    // Set guest name in card
                    cardGuestName.textContent = name;
                    
                    // Mở phong bì và hiển thị thiệp
                    openEnvelope();
                    
                    // Show first page
                    showCardPage(1);
                    
                    // Trigger confetti again
                    setTimeout(() => {
                        confetti({
                            particleCount: 50,
                            spread: 70,
                            origin: { y: 0.6 }
                        });
                    }, 1500);
                }
            });
        }
        
        // Download card functionality
        if (downloadCardBtn) {
            downloadCardBtn.addEventListener('click', () => {
                const weddingCard = document.getElementById('weddingCard');
                
                html2canvas(weddingCard, {
                    backgroundColor: null,
                    scale: 2, // Higher quality
                    logging: false,
                    allowTaint: true,
                    useCORS: true
                }).then(canvas => {
                    const link = document.createElement('a');
                    link.download = `thiep-moi-${cardGuestName.textContent.trim()}.png`;
                    link.href = canvas.toDataURL('image/png');
                    link.click();
                });
            });
        }
        
        // Share card functionality
        if (shareCardBtn) {
            shareCardBtn.addEventListener('click', () => {
                if (navigator.share) {
                    navigator.share({
                        title: 'Thiệp mời đám cưới',
                        text: `Trân trọng kính mời ${cardGuestName.textContent.trim()} đến dự lễ cưới của chúng tôi vào ngày 13/07/2025`,
                        url: window.location.href
                    })
                    .catch(error => {
                        console.log('Lỗi chia sẻ:', error);
                    });
                } else {
                    // Fallback for browsers that don't support Web Share API
                    const dummyInput = document.createElement('input');
                    document.body.appendChild(dummyInput);
                    dummyInput.value = window.location.href;
                    dummyInput.select();
                    document.execCommand('copy');
                    document.body.removeChild(dummyInput);
                    alert('Đã sao chép liên kết vào clipboard!');
                }
            });
        }

        // Enhanced Horizontal auto-scroll for carousel-list
        const carouselList = document.querySelector('.carousel-list');
        let scrollInterval;
        let marqueePaused = false;
        function startMarqueeScroll() {
            scrollInterval = setInterval(() => {
                if (marqueePaused) return;
                if (carouselList.scrollLeft + carouselList.offsetWidth >= carouselList.scrollWidth - 2) {
                    carouselList.scrollTo({ left: 0, behavior: 'auto' });
                } else {
                    carouselList.scrollLeft += 1.2; // smooth, slow marquee
                }
            }, 16); // ~60fps
        }
        function stopMarqueeScroll() {
            clearInterval(scrollInterval);
        }
        carouselList.addEventListener('mouseenter', () => { marqueePaused = true; });
        carouselList.addEventListener('mouseleave', () => { marqueePaused = false; });
        startMarqueeScroll();

        // Add touch support for mobile carousel
        let touchStartX = 0;
        let touchEndX = 0;
        let touchScrollLeft = 0;
        
        carouselList.addEventListener('touchstart', (e) => {
            marqueePaused = true;
            touchStartX = e.touches[0].clientX;
            touchScrollLeft = carouselList.scrollLeft;
        });
        
        carouselList.addEventListener('touchmove', (e) => {
            if (marqueePaused) {
                const touchDiff = touchStartX - e.touches[0].clientX;
                carouselList.scrollLeft = touchScrollLeft + touchDiff;
            }
        });
        
        carouselList.addEventListener('touchend', () => {
            setTimeout(() => { marqueePaused = false; }, 1000);
        });

        // Modal gallery logic with enhanced transitions
        const galleryImages = [
            'images/gallery-1.jpg',
            'images/gallery-2.jpg',
            'images/gallery-3.jpg',
            'images/gallery-4.jpg',
            'images/gallery-5.jpg',
            'images/gallery-6.jpg',
            'images/gallery-7.jpg',
            'images/gallery-8.jpg'
        ];
        let currentModalIndex = 0;
        
        function openImageModal(src, idx) {
            marqueePaused = true;
            const modal = document.getElementById('imageModal');
            const modalImg = document.getElementById('modalImg');
            modal.style.display = 'flex';
            modalImg.style.opacity = '0';
            modalImg.src = src;
            currentModalIndex = idx;
            document.getElementById('modalCurrent').textContent = idx + 1;
            document.getElementById('modalTotal').textContent = galleryImages.length;
            
            // Fade in animation
            setTimeout(() => {
                modalImg.style.opacity = '1';
            }, 50);
            
            // Add keyboard navigation
            document.addEventListener('keydown', handleKeyNavigation);
        }
        
        function handleKeyNavigation(e) {
            if (e.key === 'ArrowLeft') {
                document.querySelector('.modal-nav.prev').click();
            } else if (e.key === 'ArrowRight') {
                document.querySelector('.modal-nav.next').click();
            } else if (e.key === 'Escape') {
                document.querySelector('.close-modal').click();
            }
        }
        
        document.querySelector('.close-modal').onclick = function() {
            const modalImg = document.getElementById('modalImg');
            modalImg.style.opacity = '0';
            setTimeout(() => {
                document.getElementById('imageModal').style.display = 'none';
                marqueePaused = false;
            }, 300);
            document.removeEventListener('keydown', handleKeyNavigation);
        };
        
        document.getElementById('imageModal').onclick = function(e) {
            if (e.target === this) {
                document.querySelector('.close-modal').click();
            }
        };
        
        document.querySelector('.modal-nav.prev').onclick = function(e) {
            e.stopPropagation();
            const modalImg = document.getElementById('modalImg');
            modalImg.style.opacity = '0';
            
            setTimeout(() => {
                currentModalIndex = (currentModalIndex - 1 + galleryImages.length) % galleryImages.length;
                modalImg.src = galleryImages[currentModalIndex];
                document.getElementById('modalCurrent').textContent = currentModalIndex + 1;
                
                setTimeout(() => {
                    modalImg.style.opacity = '1';
                }, 50);
            }, 300);
        };
        
        document.querySelector('.modal-nav.next').onclick = function(e) {
            e.stopPropagation();
            const modalImg = document.getElementById('modalImg');
            modalImg.style.opacity = '0';
            
            setTimeout(() => {
                currentModalIndex = (currentModalIndex + 1) % galleryImages.length;
                modalImg.src = galleryImages[currentModalIndex];
                document.getElementById('modalCurrent').textContent = currentModalIndex + 1;
                
                setTimeout(() => {
                    modalImg.style.opacity = '1';
                }, 50);
            }, 300);
        };
        
        // Add swipe support for gallery on mobile
        const imageModal = document.getElementById('imageModal');
        imageModal.addEventListener('touchstart', (e) => {
            touchStartX = e.changedTouches[0].screenX;
        });
        
        imageModal.addEventListener('touchend', (e) => {
            touchEndX = e.changedTouches[0].screenX;
            const swipeThreshold = 50;
            if (touchEndX < touchStartX - swipeThreshold) {
                // Swipe left - next image
                document.querySelector('.modal-nav.next').click();
            } else if (touchEndX > touchStartX + swipeThreshold) {
                // Swipe right - previous image
                document.querySelector('.modal-nav.prev').click();
            }
        });

        // Wedding Card Generator with animations
        // Reuse variables already defined above
        const weddingCard = document.getElementById('weddingCard');
        const downloadCard = document.getElementById('downloadCard');
        
        if (cardForm && cardResult) {
            cardForm.onsubmit = function(e) {
                e.preventDefault();
                const guestNameInput = document.getElementById('guestName');
                const name = guestNameInput.value.trim();
                
                if(name) {
                    cardGuestName.textContent = name;
                    cardForm.style.display = 'none';
                    cardResult.style.display = 'block';
                    
                    // Animate card appearance
                    gsap.fromTo(cardResult, 
                        { opacity: 0, y: 20 },
                        { opacity: 1, y: 0, duration: 0.8, ease: "power2.out" }
                    );
                    
                    setTimeout(() => {
                        weddingCard.scrollIntoView({behavior:'smooth'});
                        // Trigger confetti
                        confetti({
                            particleCount: 50,
                            spread: 70,
                            origin: { y: 0.6 }
                        });
                    }, 200);
                }
            };
            downloadCard.onclick = function() {
                html2canvas(weddingCard, {
                    backgroundColor: null,
                    scale: 2, // Higher quality
                    logging: false,
                    allowTaint: true,
                    useCORS: true
                }).then(canvas => {
                    const link = document.createElement('a');
                    link.download = 'thiep-moi.png';
                    link.href = canvas.toDataURL('image/png');
                    link.click();
                });
            };
        }

        // Initialize EmailJS
        emailjs.init('pJ_Tvx5RazdzGhMzZ'); // Thay bằng Public Key từ EmailJS

        // RSVP Form Handler
        const rsvpForm = document.getElementById('rsvpForm');
        if (rsvpForm) {
            rsvpForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                // Hiển thị loading
                const submitBtn = document.querySelector('.rsvp-submit');
                const originalText = submitBtn.textContent;
                submitBtn.textContent = 'Đang gửi...';
                submitBtn.disabled = true;
                
                // Thu thập dữ liệu
                const formData = {
                    name: document.getElementById('name').value,
                    phone: document.getElementById('phone').value,
                    guests: document.getElementById('guests').value,
                    transportation: document.getElementById('transportation').value,
                    message: document.getElementById('message').value || 'Không có lời nhắn',
                    timestamp: new Date().toLocaleString('vi-VN')
                };
                
                // Template parameters cho email
                const templateParams = {
                    to_email: 'thanh150898@gmail.com',
                    subject: '🎉 Xác nhận tham dự đám cưới - ' + formData.name,
                    guest_name: formData.name,
                    guest_phone: formData.phone,
                    guest_count: formData.guests,
                    transportation: formData.transportation === 'self' ? 'Tự túc phương tiện' : 'Xe sắp xếp',
                    guest_message: formData.message,
                    submission_time: formData.timestamp
                };
                
                // Gửi email qua EmailJS
                emailjs.send('service_xnfxqxf', 'template_oe6762s', templateParams)
                    .then(function(response) {
                        // Thành công
                        submitBtn.textContent = '✅ Đã gửi!';
                        submitBtn.style.background = '#4caf50';
                        
                        // Hiển thị thông báo thành công
                        const successMsg = document.createElement('div');
                        successMsg.innerHTML = `
                            <div style="background: linear-gradient(135deg, #4caf50, #66bb6a); color: white; padding: 20px; border-radius: 12px; margin: 20px 0; text-align: center; box-shadow: 0 5px 15px rgba(76,175,80,0.3);">
                                <h3 style="margin: 0 0 10px 0; font-size: 18px;">🎉 Cảm ơn bạn đã xác nhận!</h3>
                                <p style="margin: 0; opacity: 0.9;">Thông tin đã được gửi thành công. Chúng tôi rất mong được gặp bạn!</p>
                            </div>
                        `;
                        rsvpForm.parentNode.insertBefore(successMsg, rsvpForm.nextSibling);
                        
                        // Reset form sau 2 giây
                        setTimeout(() => {
                            rsvpForm.reset();
                            submitBtn.textContent = originalText;
                            submitBtn.style.background = '';
                            submitBtn.disabled = false;
                            successMsg.remove();
                        }, 3000);
                        
                        // Confetti effect
                        confetti({
                            particleCount: 100,
                            spread: 70,
                            origin: { y: 0.6 }
                        });
                    })
                    .catch(function(error) {
                        // Lỗi
                        console.error('EmailJS Error:', error);
                        submitBtn.textContent = '❌ Lỗi, thử lại';
                        submitBtn.style.background = '#f44336';
                        
                        // Hiển thị thông báo lỗi
                        const errorMsg = document.createElement('div');
                        errorMsg.innerHTML = `
                            <div style="background: linear-gradient(135deg, #f44336, #ef5350); color: white; padding: 20px; border-radius: 12px; margin: 20px 0; text-align: center; box-shadow: 0 5px 15px rgba(244,67,54,0.3);">
                                <h3 style="margin: 0 0 10px 0; font-size: 18px;">⚠️ Có lỗi xảy ra</h3>
                                <p style="margin: 0; opacity: 0.9;">Vui lòng thử lại hoặc liên hệ trực tiếp qua số điện thoại</p>
                            </div>
                        `;
                        rsvpForm.parentNode.insertBefore(errorMsg, rsvpForm.nextSibling);
                        
                        // Reset sau 3 giây
                        setTimeout(() => {
                            submitBtn.textContent = originalText;
                            submitBtn.style.background = '';
                            submitBtn.disabled = false;
                            errorMsg.remove();
                        }, 3000);
                    });
            });
        }

        // Initialize
        updateCarousel();

        // Hero background effect (floating petals)
        function createPetal() {
            const petal = document.createElement('div');
            petal.className = 'petal';
            petal.style.left = Math.random() * 100 + 'vw';
            petal.style.animationDuration = 4 + Math.random() * 4 + 's';
            petal.style.opacity = 0.5 + Math.random() * 0.5;
            document.querySelector('.hero-bg-effect').appendChild(petal);
            setTimeout(() => petal.remove(), 8000);
        }
        setInterval(createPetal, 600);
        for (let i = 0; i < 10; i++) createPetal();
    </script>
</body>
</html>